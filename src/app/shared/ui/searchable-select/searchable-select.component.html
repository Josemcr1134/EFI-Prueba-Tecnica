<div class="space-y-2">
  <label *ngIf="label" class="text-xs uppercase tracking-[0.25em] text-slate-500">{{ label }}</label>
  <div class="relative">
    <button
      type="button"
      class="flex w-full items-center justify-between rounded-2xl border border-slate-700/70 bg-slate-950/70 px-4 py-3 text-sm text-slate-200"
      (click)="toggle()"
    >
      <span>{{ selected || placeholder }}</span>
      <span class="text-xs">â–¾</span>
    </button>

    <div *ngIf="open" class="absolute z-10 mt-2 w-full rounded-2xl border border-slate-800/80 bg-slate-950/95 p-3">
      <input
        type="text"
        [value]="search"
        (input)="onSearch($any($event.target).value)"
        placeholder="Buscar"
        class="w-full rounded-xl border border-slate-800/70 bg-slate-900/70 px-3 py-2 text-xs text-slate-200 placeholder:text-slate-600 focus:border-emerald-300 focus:outline-none"
      />
      <div class="mt-3 max-h-44 space-y-1 overflow-auto">
        <button
          *ngIf="allowClear"
          type="button"
          (click)="clear()"
          class="w-full rounded-xl px-3 py-2 text-left text-xs text-slate-400 transition hover:bg-slate-800/60"
        >
          {{ clearLabel }}
        </button>
        <button
          type="button"
          *ngFor="let option of filteredOptions"
          (click)="select(option)"
          class="w-full rounded-xl px-3 py-2 text-left text-sm text-slate-200 transition hover:bg-emerald-500/10"
        >
          {{ option }}
        </button>
        <p *ngIf="filteredOptions.length === 0" class="px-3 py-2 text-xs text-slate-500">
          Sin resultados.
        </p>
      </div>
    </div>
  </div>
</div>
